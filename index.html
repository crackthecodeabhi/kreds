
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Kreds is a non-blocking, coroutine based Kotlin Redis client library.">
      
      
        <meta name="author" content="Abhijith Shivaswamy">
      
      
        <link rel="canonical" href="https://github.com/crackthecodeabhi/kreds/">
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.6">
    
    
      
        <title>Kreds 0.6 - A redis client for Kotlin/JVM</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.9d5733d3.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    <!-- Dataunlocker -->
    <script>
      (()=>{"use strict";var e={667:(e,n)=>{n.C=void 0,function(e){e[e.loading=0]="loading",e[e.ready=1]="ready",e[e.error=2]="error"}(n.C||(n.C={}))}},n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{}};return e[r](o,o.exports,t),o.exports}(()=>{var e,n,r,o=function(e,n){return l(n,"toString",{value:function(){return e+"() { [native code] }"}}),n},i=[],u=!1,a=function(e,n){var t=(n?n.ownerDocument.defaultView:null)||window,r=t.performance;if(!r)return!0;u||t!==window||(r.addEventListener("resourcetimingbufferfull",(function(){for(var e=new Set,n=0,t=r.getEntriesByType("resource");n<t.length;n++){var o=t[n];e.add(o.name)}i.push(e),i.length>3&&i.shift(),r.clearResourceTimings()})),u=!0),e=e.replace(/^\/\//,location.protocol+"//");var o=r.getEntriesByName(e);if(o&&0===o.length&&"/"!==e[e.length-1]&&(o=r.getEntriesByName(e+"/")),0===o.length)for(var a=0,c=i;a<c.length;a++){var l=c[a];(l.has(e)||l.has(e+"/"))&&(o=[{name:e}])}return 0!==o.length},c=function(e,n){return e?Object.getOwnPropertyDescriptor(e,n)||c(Object.getPrototypeOf(e),n):{enumerable:!0,configurable:!0}},l=function(e,n,t){var r,o=c(e,n);if(!e||!1===(null===(r=Object.getOwnPropertyDescriptor(e,n))||void 0===r?void 0:r.configurable))return{object:e,originalDescriptor:o,originalGet:function(){return o.get?o.get:function(){return o.value}},originalSet:o.set?o.set:function(t){return e[n]=t}};var i=void 0!==t.value,u={enumerable:void 0!==t.enumerable?t.enumerable:o.enumerable,configurable:void 0!==t.configurable?t.configurable:o.configurable};i?(u.writable=void 0!==t.writable?t.writable:void 0===o.writable||o.writable,u.value=t.value||o.value):(u.get=t.get||o.get||function(){return e[n]},u.set=t.set||o.set||function(t){return e[n]=t});try{Object.defineProperty(e,n,u)}catch(t){}return{object:e,originalDescriptor:o,originalGet:i?function(){return o.value}:o.get?o.get:function(){},originalSet:i?function(t){return e[n]=t}:o.set?o.set:function(e){return e}}},f=function(e){return!e.hasOwnProperty("__du")&&(l(e,"__du",{value:null,enumerable:!1}),!0)},s=Math.pow(2,32),d=function(e){for(var n=0,t=1779033703^e.length;n<e.length;n++)t=(t=Math.imul(t^e.charCodeAt(n),3432918353))<<13|t>>>19;return function(e){return void 0===e&&(e=0),t=Math.imul(t^t>>>16,(2246822507+e)%s),t=Math.imul(t^t>>>13,3266489909),(t^=t>>>16)>>>0}},v=function(e,n,t){void 0===t&&(t=1),t>0&&(e=btoa(e).replace(/[=]+$/,""));for(var r,o,i,u=d(n),a=new Array(e.length),c=e.length,l=u(e.length),f=0,s=0;c-- >0;)a[c]=(void 0,64,r=f=(o=(s=(i=e[c].charCodeAt(0))>96?i-59:i>64?i-53:i>46?i-46:43===i?0:1)+t*l)<0?(o%64+64)%64:o%64,String.fromCharCode(r>37?r+59:r>11?r+53:r>0?r+46:43)),l=u(t>0?s:f);var v=a.join("");return t>0?v.replace(/\//g,"-"):atob(v)},p=function(e){return(d(e)()+Math.floor(Date.now()/864e5))%s},h=function(e){return Math.floor(Number.MAX_SAFE_INTEGER*e).toString(36)},y=function(e,n,t){var r,o=p(n),i=(r=o,function(){var e=r+=1831565813;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/s});return function(e,n){for(var t=[],r=0;r<e.length&&t.push(e.substring(r,r+=3+(20*n()>>0))););return t.join("/")}(v(e+(-1===e.indexOf("?")?"?__du=":"&__du=")+(t?t.join(",")+"+":"")+h(i()),n),i)},g=function(e){return console.error.call(console,e)},b=function(e,n,t){var r=e.currentTarget,o=e.target,i=n||r,u=t||o,a=function(e,n){for(var t={},r=0,o=Object.entries(n);r<o.length;r++){var i=o[r],u=i[0],a=i[1];t[u]=l(e,u,a)}return t}(e,{currentTarget:{get:function(){return i}},target:{get:function(){return u}},srcElement:{get:function(){return u}},path:{get:function(){return a.originalGet.apply(this).slice().map((function(e){return n&&r===e?n:t&&o===e?t:e}))}}}).path;return function(){delete e.currentTarget,delete e.target,delete e.srcElement,delete e.path}},m=function(e,n){try{return e(n)}catch(e){g(e)}},w=function(e,n){try{if("function"==typeof e)return e(n);if(e&&"function"==typeof e.handleEvent)return e.handleEvent(n)}catch(e){g(e)}},E=function(e,n){if("function"==typeof e.addEventListener){e.constructor.name;var t=[],r=[],i=[],u=[],a=function(e){var n=r[e];return!!n&&(n(),r[e]=void 0,!0)},c=l(e,"addEventListener",{value:o("addEventListener",(function(e,r){var o=n.findIndex((function(n){return n.event===e}));return-1!==o?void t[o].push(r):c().apply(this,arguments)}))}).originalGet;if("function"==typeof e.setAttribute)var f=l(e,"setAttribute",{value:o("setAttribute",(function(t,r){var o=n.findIndex((function(e){return"on"+e.event===t}));return-1!==o&&i[o]?(i[o](Function(r).bind(e)),this):f().apply(this,arguments)}))}).originalGet;for(var s=function(o){var f=n[o],s=f.event,d=f.on,v="on"+s,p="function"==typeof e[v]?e[v].bind(e):null,h=-1,y=function(e){(p=e)?-1===h&&(h=t[o].length-1):h=-1},g=function(n){-1===h&&p&&w(p,n),t[o].forEach((function(t,r){w("function"==typeof t?t.bind(e):t,n),r===h&&p&&w(p,n)}))};t.push([]),i.push(y),u.push(g),p&&(e[v]=null),void 0!==e[v]&&l(e,v,{set:function(e){return y("function"==typeof e?e.bind(this):null),e},get:function(){return p}}),c().call(e,s,(function(e){var t=b(e);r[o]=function(){g(e),t()},d&&d((function(){return a(o)}),(function(e,t){return t?(u[n.findIndex((function(n){return n.event===e}))](t),!0):a(n.findIndex((function(n){return n.event===e})))}),(function(e){return t=n.findIndex((function(n){return n.event===e})),void(r[t]=void 0);var t}))}))},d=0;d<n.length;++d)s(d)}},O="undefined"!=typeof window&&window,P=new Set(Object.keys(O)),x={},N=1,I=function(e,n){if(!/^https?:\/\//.test(e)||e.replace(/^https?:\/\//,"").replace(/\/.*$/,"")===location.host)return 0;if(e.startsWith(location.protocol+"//"+n.o))return 0;for(var t={window:{}},r=N++,o=0,i=Object.keys(window);o<i.length;o++){var u=i[o];if(!P.has(u)&&!u.startsWith("webkit")&&"window"!==u){var a=void 0;try{a=window[u]}catch(e){continue}a!==O&&(t.window[u]={ref:a,entries:a instanceof Object?Object.entries(a).concat(a instanceof Array?[["length",a.length]]:[]):[]})}}return x[r]=t,r},R=function(e,n){var t=n.window,r=window,o=t[e];if(o){if(r[e]!==o.ref&&m((function(){return r[e]=o.ref})),r[e]instanceof Object){for(var i=function(n){if(o.entries.find((function(e){return e[0]===n})))return"continue";delete r[e][n]},u=0,a=Object.keys(r[e]);u<a.length;u++)i(a[u]);for(var c=function(n,t){if(r[e][n]===t)return"continue";m((function(){return r[e][n]=t}))},l=0,f=o.entries;l<f.length;l++){var s=f[l];c(s[0],s[1])}}}else r[e]&&delete r[e]},T=function(e){delete x[e]},C=window.document.createElement,S=window.MutationObserver,_=t(667),A=_.C.loading,L=null,j=l([],"push",{value:function(e){L=e,function(e){G.on(Y),U(_.C.ready);for(var n=0,t=K;n<t.length;n++){var r=t[n];Y(r)}}()}}).object,M="3.0.3",H={type:"dns",urlKey:"5mc92su06suu",encKey:"bt6co9wpuvoe"},D="www.abhijith.page",q="dns"===H.type?H.urlKey+"."+D:D+"/"+H.urlKey,B=function(e,n){return y(e,H.encKey,n)},G=(e=[],Object.freeze({on:function(n){return"function"==typeof n&&e.push(n)},emit:function(n){var t=this;return e.forEach((function(e){return e.apply(t,[n])}))}})),K=[],k=Object.freeze({cb:G,v:M,i:document.getElementsByTagName("SCRIPT").length,h:"NVJ9ISxGUkJyPT9VPWxyVThcJVNKe1t6JQ",r:function(e,n,t){var r=x[e];if(r){for(var o=0,i=n;o<i.length;o++){var u=i[o];R(u,r)}"function"==typeof t&&t(r,(function(e){return R(e,r)})),T(e)}},o:D,e:K,ep:B,dp:function(e){return n=H.encKey,v(e.replace(/\//g,""),n,-1);var n},a:function(){return A},d:j,c:Number("-1648117219572"),p:H}),U=function(e){return A=e},X=function(){return A},W=function(e){if(e.onNoProxy)try{e.onNoProxy()}catch(e){}},Y=function(e){var n=L;if(n){var t=function(e,n,t){if(!e)return"";var r=n.a,o=n.b,i=n.c,u=(0===e.indexOf("/")?location.protocol:e).replace(/:.*$/,""),a=e.match(/^(?:https?:)?\/\/([^/]+)(.*)/)||[],c=(a[0],a[1]),l=a[2],f=location.protocol+"//"+q;if(!c)return"";if(0===c.indexOf(location.hostname))return"";if(0===e.indexOf(f))return"";var s=c.toLowerCase(),d="*."+(s.match(/(?:[^\.]+\.)?[^\.]+$/)||[""])[0],v=-1!==r.indexOf(s),p=-1!==o.indexOf(s),h=-1!==r.indexOf(d),y=-1!==o.indexOf(d);return p||!v&&(i?y:!h)?"":f+"/"+B(u+"/"+c+(l||""),t)}(e.url,n,e.flags);if(t)try{e.onProxy(t)}catch(n){W(e)}else W(e)}else W(e)},$=/^(?:https?:)?\/\//,z=location&&location.protocol||"https",F=location&&location.host||"",V=z+"//"+q.replace(/^\*/,(function(){return h(p(H.urlKey))}))+"/"+y(z.replace(/:/,"")+"/api.dataunlocker.com/static/v1/async.js?v="+encodeURIComponent(M),H.encKey),J=q.split("/")[0].replace(/:[0-9]+$/,"").endsWith(F.replace(/:[0-9]+$/,"")),Q=function(){U(_.C.error);for(var e=0,n=K;e<n.length;e++){var t=n[e];W(t)}},Z=!1,ee=function(e){if(e.url)if(X()!==_.C.error){var n=(F.match(/(?:[^.]+\.)?[^.]+$/)||[])[0]||F;$.test(e.url)&&!e.url.replace($,"").replace(/\/.*/,"").endsWith(n)?(X()!==_.C.ready&&K.push(e),G.emit(e),function(){if(!Z){if(Z=!0,!J)return void Q();var e=C.call(document,"SCRIPT"),n=function(){e.parentNode&&e.parentNode.removeChild(e)};e.setAttribute("async",""),e.setAttribute("src",V),e.addEventListener("load",(function(){n()})),e.addEventListener("error",(function(e){n(),Q()})),document.head.appendChild(e)}}()):W(e)}else W(e);else W(e)},ne=navigator.sendBeacon.bind(navigator),te=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],re=function(e){var n=e.tagName,t=e.onProxy;return function(e,r){if(f(e)){var o=r&&e.src&&"SCRIPT"===n?I(e.src,k):0;if("SCRIPT"===n&&S&&!r){var i=setTimeout((function(){u.disconnect()}),1e4),u=new S((function(){document.contains(e)&&(clearTimeout(i),u.disconnect(),e.src&&(o=I(e.src,k)))}));u.observe(document,{childList:!0,subtree:!0})}E(e,[{event:"error",on:function(n,r){ee({url:e.src,onProxy:function(o){return t({newUrl:o,element:e,releaseErrorHandlers:n,fireLoadHandlers:function(n){var t=b(n,e,e);r("load",n),t()}})},onNoProxy:n})}},{event:"load",on:function(n){if(!e.src||a(e.src,e))return n();var r=function(){o&&T(o),n()};ee({url:e.src,flags:["npe"].concat(o?["ss="+o]:[]),onProxy:function(n){return t({newUrl:n,element:e,releaseErrorHandlers:r,fireLoadHandlers:r})},onNoProxy:r})}}])}}},oe=re({tagName:"IMG",onProxy:function(e){var n=e.newUrl;e.element.src=n}}),ie=re({tagName:"SCRIPT",onProxy:function(e){var n=e.newUrl,t=e.element,r=e.releaseErrorHandlers,o=e.fireLoadHandlers;if(t.src){for(var i=C.call(document,"SCRIPT"),u=function(){i.parentNode&&i.parentNode.removeChild(i)},a=0,c=[].slice.call(t.attributes);a<c.length;a++){var l=c[a],f=l.name,s=l.value;"src"!==f&&"onerror"!==f&&"onload"!==f&&i.setAttribute(f,s)}i.setAttribute("src",n),i.addEventListener("error",(function(){r(),u()})),i.addEventListener("load",(function(e){o(e),u()})),t.parentNode?t.parentNode.insertBefore(i,t):document.head.appendChild(i)}else r()}}),ue=function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function u(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(u,a)}c((r=r.apply(e,n||[])).next())}))},ae=function(e,n){var t,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!((o=(o=u.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=n.call(e,u)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},ce=window.fetch,le=Image,fe=window.XMLHttpRequest,se=function(e){var n=new fe(e);return function(e){if(f(e)){var n,t,r=[],i=!1,u=!1,a=(e.constructor.name,e.hasOwnProperty("open")?e.open:null);l(e,"open",{value:o("open",(function(){return n=[].slice.call(arguments),(a||fe.prototype.open).apply(this,n)}))});var c=e.hasOwnProperty("send")?e.send:null;l(e,"send",{value:o("send",(function(){return t=[].slice.call(arguments),i=!0,(c||fe.prototype.send).apply(this,t)}))});var s=l(e,"setRequestHeader",{value:o("setRequestHeader",(function(e,n){try{var t=s().apply(this,arguments);return r.push([e,n]),t}catch(t){throw t}}))}).originalGet,d=!1,v=!0;E(e,[{event:"error",on:function(e){return d&&e()}},{event:"load",on:function(e){if(!i){if(v)return e();v=!0}}},{event:"loadend",on:function(e){if(u=!1,!i)return e()}},{event:"readystatechange",on:function(o,a,c){if(d=!1,4!==e.readyState)return o();if(e.status>=100&&e.status<400)return i=!1,r=[],c("error"),o();var l=function(){i=!1,r=[],o(),a("error")||(d=!0,a("load"),a("loadend"),u&&0!==e.status&&(v=!1))};if(!n)return l();ee({url:n[1],onProxy:function(o){var i=n.slice();i[1]=o,e.open.apply(e,i),u=!0;for(var a=0,c=r;a<c.length;a++){var l=c[a],f=l[0],d=l[1];s().call(e,f,d)}e.send.apply(e,t)},onNoProxy:l})}}])}}(n),n};se.prototype=fe.prototype,Object.setPrototypeOf(se,fe),[function(){if(S){var e=new S((function(e){for(var n=0,t=e;n<t.length;n++)for(var r=t[n],o=0;o<r.addedNodes.length;++o){var i=r.addedNodes[o];i instanceof HTMLScriptElement?ie(i,!0):i instanceof HTMLImageElement&&oe(i)}}));document.addEventListener("DOMContentLoaded",(function(){requestAnimationFrame((function(){e.disconnect()}))})),e.observe(document,{childList:!0,subtree:!0})}},function(){l(Document.prototype,"createElement",{value:o("createElement",(function(){var e=(arguments[0]||"").toUpperCase(),n=C.apply(this,[].slice.call(arguments));return"SCRIPT"===e?ie(n):"IMG"===e&&oe(n),n}))})},function(){ce&&l(window,"fetch",{value:o("fetch",(function(e,n){return ue(void 0,void 0,void 0,(function(){var t,r,o,i,u,c;return ae(this,(function(f){switch(f.label){case 0:t=e instanceof Request?e.url:e,r=e instanceof Request&&e.clone?function(){try{return e.clone()}catch(e){}}():void 0,o=function(o,i){return new Promise((function(u,a){ee({url:t,onProxy:function(t){!function(e,n){var t=n.originalInput,r=n.originalError,o=n.originalResult,i=n.originalRequestInit,u=n.clonedInput,a=n.resolve,c=n.reject;ue(void 0,void 0,void 0,(function(){var n,f,s,d;return ae(this,(function(v){switch(v.label){case 0:n=function(){return r?c(r):a(o)},v.label=1;case 1:if(v.trys.push([1,8,,9]),!(t instanceof Request))return[3,6];s=void 0,d=u||t,v.label=2;case 2:return v.trys.push([2,4,,5]),[4,d.blob()];case 3:return s=v.sent(),[3,5];case 4:return v.sent(),[3,5];case 5:return s&&"HEAD"!==d.method&&"GET"!==d.method&&l(d,"body",{value:s}),t=new Request(e,d),[3,7];case 6:t=e,v.label=7;case 7:return[3,9];case 8:return v.sent(),[2,n()];case 9:return v.trys.push([9,11,,12]),[4,ce.bind(window)(t,i)];case 10:return f=v.sent(),[3,12];case 11:return v.sent(),[2,n()];case 12:return 0!==f.status&&(f.status<100||f.status>399)?[2,n()]:[2,a(f)]}}))}))}(t,{originalInput:e,originalError:i,originalResult:o,originalRequestInit:n,clonedInput:r,resolve:u,reject:a})},onNoProxy:function(){i?a(i):u(o)}})}))},f.label=1;case 1:return f.trys.push([1,3,,5]),[4,ce(e,n)];case 2:return i=f.sent(),[3,5];case 3:return u=f.sent(),[4,o(void 0,u)];case 4:return[2,f.sent()];case 5:if(c=0!==i.status&&(i.status<100||i.status>399),0!==i.status||!i.clone)return[3,10];f.label=6;case 6:return f.trys.push([6,9,,10]),[4,i.clone().text()];case 7:return f.sent(),[4,new Promise((function(e){return setTimeout(e,0)}))];case 8:return f.sent(),a(t)||(c=!0),[3,10];case 9:return f.sent(),[3,10];case 10:return c?[4,o(i)]:[3,12];case 11:return[2,f.sent()];case 12:return[2,i]}}))}))}))})},function(){l(navigator,"sendBeacon",{value:o("sendBeacon",(function(e,n){if(window.hasOwnProperty("fetch")){var t=!n||!(n instanceof Blob&&!te.find((function(e){return n.type.startsWith(e)}))),r={method:"POST",keepalive:!0,credentials:t?"same-origin":"include",mode:t?"no-cors":"cors"};if(r.body=n||0===n?n:"",r.importance="low",r.body instanceof Blob){if(r.body.size>65536)return!1}else if(r.body&&"function"==typeof r.body.toString&&r.body.toString().length>65536)return!1;return fetch(e,r),!0}var o=ne(e,n);return o&&ee({url:e,onProxy:function(t){!function(e,n){if(performance){var t=3e4,r=function(){var o=performance.getEntriesByName(e),i=o[o.length-1];if(i){var u=i.duration||0;0===(0===u?i.responseEnd-i.startTime||0:u)&&n()}else{if((t-=500)<=0)return;setTimeout(r,500)}};setTimeout(r,0)}}(e,(function(){ne(t,n)}))}}),o}))})},function(){l(window,"XMLHttpRequest",{value:o("XMLHttpRequest",se)})},function(){l(window,"Image",{value:o("Image",(function(e,n){var t=new le(e,n);return oe(t),t}))})},function(){l(window,"7KByYIs",{enumerable:!1,configurable:!1,get:function(){return k}})}].map((function(e){try{e()}catch(e){}})),null===(r=null===(n=document.currentScript)||void 0===n?void 0:n.parentNode)||void 0===r||r.removeChild(document.currentScript)})()})();
    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QT1H11ZPLM"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QT1H11ZPLM');
    </script>

    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Kreds 0.6 - A redis client for Kotlin/JVM" class="md-header__button md-logo" aria-label="Kreds 0.6 - A redis client for Kotlin/JVM" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kreds 0.6 - A redis client for Kotlin/JVM
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting Started
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/crackthecodeabhi/kreds/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    crackthecodeabhi/kreds
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="." class="md-tabs__link md-tabs__link--active">
      Getting Started
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="apidocs/" class="md-tabs__link">
      API Docs
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="faq/" class="md-tabs__link">
      FAQ
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Kreds 0.6 - A redis client for Kotlin/JVM" class="md-nav__button md-logo" aria-label="Kreds 0.6 - A redis client for Kotlin/JVM" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Kreds 0.6 - A redis client for Kotlin/JVM
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/crackthecodeabhi/kreds/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    crackthecodeabhi/kreds
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        Getting Started
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-kreds" class="md-nav__link">
    What is Kreds?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    Basic usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pipelining" class="md-nav__link">
    Pipelining
  </a>
  
    <nav class="md-nav" aria-label="Pipelining">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pipelining-usage" class="md-nav__link">
    Pipelining usage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pubsub" class="md-nav__link">
    Pub/Sub
  </a>
  
    <nav class="md-nav" aria-label="Pub/Sub">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subscriber-usage" class="md-nav__link">
    Subscriber Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publisher-usage" class="md-nav__link">
    Publisher Usage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="apidocs/" class="md-nav__link">
        API Docs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-kreds" class="md-nav__link">
    What is Kreds?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-usage" class="md-nav__link">
    Basic usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pipelining" class="md-nav__link">
    Pipelining
  </a>
  
    <nav class="md-nav" aria-label="Pipelining">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pipelining-usage" class="md-nav__link">
    Pipelining usage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pubsub" class="md-nav__link">
    Pub/Sub
  </a>
  
    <nav class="md-nav" aria-label="Pub/Sub">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subscriber-usage" class="md-nav__link">
    Subscriber Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publisher-usage" class="md-nav__link">
    Publisher Usage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/crackthecodeabhi/kreds/edit/master/docs/index.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>



<h1 id="getting-started">Getting Started</h1>
<h2 id="what-is-kreds">What is Kreds?</h2>
<p>Kreds is an asynchronous, non-blocking redis client library written in Kotlin using co-routines.</p>
<p>It makes use if Java NIO, Netty, Kotlin Coroutines. It provides an idiomatic approach to use redis in your server applications.</p>
<p>The following features of redis are implemented in Kreds.</p>
<ul>
<li>Commands operating on Strings, Hash, Lists, Keys, Sets, Sorted Sets. ✔️</li>
<li>Blocking commands. ✔️</li>
<li>Pipelining. ✔️</li>
<li>Publish/Subscribe. ✔️</li>
<li>Connection handling commands. ✔️</li>
</ul>
<h2 id="basic-usage">Basic usage</h2>
<p>Here's a basic usage of the library.</p>
<div class="highlight"><span class="filename">Basic Usage</span><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kd">fun</span> <span class="nf">main</span><span class="p">(){</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="n">runBlocking</span> <span class="p">{</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>        <span class="kd">val</span> <span class="nv">job</span>  <span class="o">=</span> <span class="n">launch</span><span class="p">(</span><span class="n">Dispatchers</span><span class="p">.</span><span class="na">Default</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>            <span class="n">newClient</span><span class="p">(</span><span class="n">Endpoint</span><span class="p">.</span><span class="na">from</span><span class="p">(</span><span class="s">&quot;127.0.0.1:6379&quot;</span><span class="p">)).</span><span class="na">use</span> <span class="p">{</span> <span class="n">client</span> <span class="o">-&gt;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>                <span class="n">client</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;100&quot;</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>                <span class="c1">// prints 101</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>                <span class="n">println</span><span class="p">(</span><span class="s">&quot;incremented value of foo </span><span class="si">${</span><span class="n">client</span><span class="p">.</span><span class="na">incr</span><span class="p">(</span><span class="s">&quot;</span><span class="n">foo</span><span class="s">&quot;</span><span class="p">)</span><span class="si">}</span><span class="s">&quot;</span><span class="p">)</span> 
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>                <span class="n">client</span><span class="p">.</span><span class="na">expire</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="m">3</span><span class="n">u</span><span class="p">)</span> <span class="c1">// set expiration to 3 seconds</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>                <span class="n">delay</span><span class="p">(</span><span class="m">3000</span><span class="p">)</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>                <span class="n">assert</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>                <span class="n">println</span><span class="p">(</span><span class="s">&quot;done&quot;</span><span class="p">)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>            <span class="p">}</span> <span class="c1">// &lt;--- the client/connection to redis is closed.</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>        <span class="p">}</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>        <span class="n">job</span><span class="p">.</span><span class="na">join</span><span class="p">()</span> <span class="c1">// wait for the co-routine to complete</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>        <span class="n">shutdown</span><span class="p">()</span> <span class="c1">// shutdown the Kreds Event loop.</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>    <span class="p">}</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="p">}</span>
</code></pre></div>
<h2 id="pipelining">Pipelining</h2>
<p>Kreds supports pipelining of Redis commands</p>
<p>Pipelining enables you to execute redis commands in a batch, instead of making a network call for each command.</p>
<h3 id="pipelining-usage">Pipelining usage</h3>
<div class="highlight"><span class="filename">Pipeline Execution</span><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kd">fun</span> <span class="nf">main</span><span class="p">(){</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    <span class="n">runBlocking</span> <span class="p">{</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>        <span class="n">newClient</span><span class="p">(</span><span class="n">Endpoint</span><span class="p">.</span><span class="na">from</span><span class="p">(</span><span class="s">&quot;127.0.0.1:6379&quot;</span><span class="p">)).</span><span class="na">use</span> <span class="p">{</span> <span class="n">client</span>  <span class="o">-&gt;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>            <span class="kd">val</span> <span class="nv">pipe</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="na">pipelined</span><span class="p">()</span> <span class="c1">// Create a pipeline object on this client connection.</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>            <span class="n">pipe</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">,</span><span class="s">&quot;500&quot;</span><span class="p">)</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>            <span class="c1">// incrementedValueFn can be invoked post pipeline execution to get command result.</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>            <span class="kd">val</span> <span class="nv">incrementedValueFn</span> <span class="o">=</span> <span class="n">pipe</span><span class="p">.</span><span class="na">incr</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">)</span>  
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>            <span class="n">pipe</span><span class="p">.</span><span class="na">sadd</span><span class="p">(</span><span class="s">&quot;myset&quot;</span><span class="p">,</span><span class="s">&quot;A&quot;</span><span class="p">,</span><span class="s">&quot;B&quot;</span><span class="p">,</span><span class="s">&quot;C&quot;</span><span class="p">,</span><span class="s">&quot;D&quot;</span><span class="p">,</span><span class="s">&quot;E&quot;</span><span class="p">,</span><span class="s">&quot;F&quot;</span><span class="p">,</span><span class="s">&quot;G&quot;</span><span class="p">,</span><span class="s">&quot;H&quot;</span><span class="p">,</span><span class="s">&quot;I&quot;</span><span class="p">)</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>            <span class="kd">val</span> <span class="nv">setCountFn</span> <span class="o">=</span> <span class="n">pipe</span><span class="p">.</span><span class="na">scard</span><span class="p">(</span><span class="s">&quot;myset&quot;</span><span class="p">)</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>            <span class="n">pipe</span><span class="p">.</span><span class="na">execute</span><span class="p">()</span> <span class="c1">// execute the pipeline of commands.</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>            <span class="n">assert</span><span class="p">(</span><span class="n">incrementedValueFn</span><span class="p">()</span> <span class="o">==</span> <span class="m">501L</span><span class="p">)</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>            <span class="n">assert</span><span class="p">(</span><span class="n">setCountFn</span><span class="p">()</span> <span class="o">==</span> <span class="m">9L</span><span class="p">)</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>        <span class="p">}</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>        <span class="n">shutdown</span><span class="p">()</span> <span class="c1">// shutdown the Kreds event loop on application shutdown.</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>    <span class="p">}</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="p">}</span>
</code></pre></div>
<h2 id="pubsub">Pub/Sub</h2>
<p>Use Kreds to publish message and subscribe to channels.
Kreds does not use single thread per subscription, so you are not limited by the number of threads you have.</p>
<p>This enabled Kreds applications to subscribe to many channels and scale up easily.</p>
<h3 id="subscriber-usage">Subscriber Usage</h3>
<div class="highlight"><span class="filename">Redis Subscriber</span><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kd">fun</span> <span class="nf">main</span><span class="p">(){</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>    <span class="n">runBlocking</span> <span class="p">{</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>        <span class="c1">// This call returns after all the coroutines finish.</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>        <span class="n">coroutineScope</span> <span class="p">{</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>            <span class="kd">val</span> <span class="nv">kredSubscriptionHandler</span> <span class="o">=</span> <span class="k">object</span> <span class="p">:</span> <span class="nc">AbstractKredsSubscriber</span><span class="p">()</span> <span class="p">{</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>                <span class="kd">override</span> <span class="kd">fun</span> <span class="nf">onMessage</span><span class="p">(</span><span class="n">channel</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>                    <span class="n">println</span><span class="p">(</span><span class="s">&quot;Received message: </span><span class="si">$</span><span class="n">message</span><span class="s"> from channel </span><span class="si">$</span><span class="n">channel</span><span class="s">&quot;</span><span class="p">)</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>                <span class="p">}</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>                <span class="kd">override</span> <span class="kd">fun</span> <span class="nf">onSubscribe</span><span class="p">(</span><span class="n">channel</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="n">subscribedChannels</span><span class="p">:</span> <span class="kt">Long</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>                    <span class="n">println</span><span class="p">(</span><span class="s">&quot;Subscribed to channel: </span><span class="si">$</span><span class="n">channel</span><span class="s">&quot;</span><span class="p">)</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>                <span class="p">}</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>                <span class="kd">override</span> <span class="kd">fun</span> <span class="nf">onUnsubscribe</span><span class="p">(</span><span class="n">channel</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="n">subscribedChannels</span><span class="p">:</span> <span class="kt">Long</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>                    <span class="n">println</span><span class="p">(</span><span class="s">&quot;Unsubscribed from channel: </span><span class="si">$</span><span class="n">channel</span><span class="s">&quot;</span><span class="p">)</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>                <span class="p">}</span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>                <span class="kd">override</span> <span class="kd">fun</span> <span class="nf">onException</span><span class="p">(</span><span class="n">ex</span><span class="p">:</span> <span class="n">Throwable</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>                    <span class="n">println</span><span class="p">(</span><span class="s">&quot;Exception while handling subscription to redis: </span><span class="si">${</span><span class="n">ex</span><span class="p">.</span><span class="na">stackTrace</span><span class="si">}</span><span class="s">&quot;</span><span class="p">)</span>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a>                <span class="p">}</span>
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a>
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a>            <span class="p">}</span>
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a>
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a>            <span class="n">newSubscriberClient</span><span class="p">(</span><span class="n">Endpoint</span><span class="p">.</span><span class="na">from</span><span class="p">(</span><span class="s">&quot;127.0.0.1:6379&quot;</span><span class="p">),</span><span class="n">kredSubscriptionHandler</span><span class="p">).</span><span class="na">use</span> <span class="p">{</span> <span class="n">client</span> <span class="o">-&gt;</span>
<a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a>                <span class="n">client</span><span class="p">.</span><span class="na">subscribe</span><span class="p">(</span><span class="s">&quot;notifications&quot;</span><span class="p">)</span>
<a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a>                <span class="n">delay</span><span class="p">(</span><span class="m">30.</span><span class="n">seconds</span><span class="p">)</span>
<a id="__codelineno-2-28" name="__codelineno-2-28" href="#__codelineno-2-28"></a>                <span class="n">client</span><span class="p">.</span><span class="na">unsubscribe</span><span class="p">(</span><span class="s">&quot;notifications&quot;</span><span class="p">)</span>
<a id="__codelineno-2-29" name="__codelineno-2-29" href="#__codelineno-2-29"></a>            <span class="p">}</span>
<a id="__codelineno-2-30" name="__codelineno-2-30" href="#__codelineno-2-30"></a>        <span class="p">}</span>
<a id="__codelineno-2-31" name="__codelineno-2-31" href="#__codelineno-2-31"></a>        <span class="n">shutdown</span><span class="p">()</span> <span class="c1">// Shutdown the Kreds event loop on application shutdown.</span>
<a id="__codelineno-2-32" name="__codelineno-2-32" href="#__codelineno-2-32"></a>    <span class="p">}</span>
<a id="__codelineno-2-33" name="__codelineno-2-33" href="#__codelineno-2-33"></a><span class="p">}</span>
</code></pre></div>
<h3 id="publisher-usage">Publisher Usage</h3>
<div class="highlight"><span class="filename">Redis Publisher</span><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kd">suspend</span> <span class="kd">fun</span> <span class="nf">publish</span><span class="p">(){</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>    <span class="n">newClient</span><span class="p">(</span><span class="n">Endpoint</span><span class="p">.</span><span class="na">from</span><span class="p">(</span><span class="s">&quot;127.0.0.1:6379&quot;</span><span class="p">)).</span><span class="na">use</span> <span class="p">{</span> <span class="n">publisher</span> <span class="o">-&gt;</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>        <span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="k">in</span> <span class="m">1</span> <span class="n">until</span> <span class="m">10</span><span class="p">){</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>            <span class="n">publisher</span><span class="p">.</span><span class="na">publish</span><span class="p">(</span><span class="s">&quot;notifications&quot;</span><span class="p">,</span><span class="s">&quot;message-</span><span class="si">$</span><span class="n">i</span><span class="s">&quot;</span><span class="p">)</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>        <span class="p">}</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>    <span class="p">}</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="p">}</span>
</code></pre></div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
      
        
        <a href="apidocs/" class="md-footer__link md-footer__link--next" aria-label="Next: API Docs" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              API Docs
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2020 Abhijith Shivaswamy
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.expand", "navigation.instant", "navigation.tabs"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "assets/javascripts/workers/search.5e67fbfe.min.js"}</script>
    
    
      <script src="assets/javascripts/bundle.e87a5f81.min.js"></script>
      
    
  </body>
</html>